<ons-page id="list-page">

    <ons-list>
        <ons-list-header>店舗</ons-list-header>
        <ons-lazy-repeat id="infinite-list"></ons-lazy-repeat>
    </ons-list>

    <ons-fab position="bottom right">
        <ons-fab  modifier="mini modifier2" onclick="fn.pushPage({'id':'/static/brownbags/html/search.html', 'title':'検索', 'index':'1'})">
            <ons-icon icon="fa-search"></ons-icon>
        </ons-fab>
    </ons-fab>

    <script>
        ons.getScriptPage().onInit = function () {
            //console.log("list.html: onInit()");
        };
        ons.getScriptPage().onShow = function () {
            //readShopList(updateList);
            //console.log("list.html: onShow()");
        };
        ons.getScriptPage().onHide = function () {
            //console.log("list.html: onHide()");
        };
        ons.getScriptPage().onDestroy = function () {
            //console.log("list.html: onDestroy()");
        };

        //function updateList(data) {
        function updateList() {
            //readShopListDone(data);

            var infiniteList = document.getElementById('infinite-list');

            infiniteList.delegate = {
                createItemContent: function(index) {
                    //return ons.createElement('<ons-list-item>Item ' + index + '</ons-list-item>');
                    return createItem(index);
                },
                countItems: function() {
                    return getShopItemCount();
                },
            };

            infiniteList.refresh();
            ons.notification.toast("リスト更新", { timeout: 1000, animation: 'fall' });
        }

        // アクティブなタブが変わる前に発火します。
        document.addEventListener('prechange', function(event) {
        });

    </script>

</ons-page>
